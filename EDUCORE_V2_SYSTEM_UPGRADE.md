# ๐ Educore V2 - ููุฎุต ุงูุชุญุฏูุซ ุงูุดุงูู ูููุธุงู

## ๐ ุชุงุฑูุฎ ุงูุชุญุฏูุซ
2026-01-24

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ูุธุงู Educore ุจุงููุงูู ููุงูุชูุงู ูู ุงูุงุนุชูุงุฏ ุนูู ุฃุฌูุฒุฉ ุงูุจุงุฑููุฏ (Hardware-based) ุฅูู ูุธุงู **ุฅุฏุฎุงู ูุฏููุ ุตุงุฑูุ ููุจุณุท**.

---

## ๐ง ุงูุชุบููุฑุงุช ุงูุฃุณุงุณูุฉ ุงูุฃุฑุจุนุฉ

### 1๏ธโฃ ุชุบููุฑ ูููุฉ ุงูุทุงูุจ (barcode โ student_code)

#### โ ูุง ุชู ุชูููุฐู:
- ุชุบููุฑ ุงุณู ุงูุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `barcode` ุฅูู `student_code`
- ุชูููู ุงูุญุฏ ุงูุฃูุตู ููุทูู ูู 50 ุฅูู 10 ุฃุญุฑู
- ุฅุถุงูุฉ help_text ุชูุถูุญู: "ููุฏ ูุตูุฑ ููููุฒ (ูุซุงู: 1001ุ 5050)"

#### ๐ ุงููููุงุช ุงูููุนุฏููุฉ:
```
apps/students/models.py          โ ุชุบููุฑ field name
apps/students/admin.py           โ ุชุญุฏูุซ list_display ู search_fields
apps/students/forms.py           โ ุชุญุฏูุซ StudentForm
apps/attendance/admin.py         โ ุชุญุฏูุซ search_fields
apps/reports/admin.py            โ ุชุญุฏูุซ search_fields
```

#### ๐ก ุงูุงุณุชุฎุฏุงู ุงูุฌุฏูุฏ:
- ุจุฏูุงู ูู ูุณุญ ุงูุจุงุฑููุฏุ ูุชู ูุชุงุจุฉ ุงูููุฏ ูุฏููุงู: `1001`, `5050`, ุฅูุฎ
- ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุญุชูู ุนูู **ูุฑุจุน ุฅุฏุฎุงู ูุตู** ุจุฏูุงู ูู scanner interface

---

### 2๏ธโฃ ุฅุฏุงุฑุฉ ุงููุงุนุงุช + ููุน ุงูุชุนุงุฑุถ (Conflict-Free Scheduling)

#### โ ูุง ุชู ุชูููุฐู:

##### A. ููุฏูู ุฌุฏูุฏ: `Room`
```python
class Room(models.Model):
    room_id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, unique=True)
    capacity = models.PositiveIntegerField()
    is_active = models.BooleanField(default=True)
```

##### B. ุฑุจุท Room ุจู Group
```python
class Group(models.Model):
    # ... ุญููู ููุฌูุฏุฉ
    room = models.ForeignKey(Room, on_delete=models.PROTECT, null=True, blank=True)
```

##### C. Validation Layer (ููุน ุงูุชุนุงุฑุถ)
```python
# Database-Level Constraint
constraints = [
    models.UniqueConstraint(
        fields=['room', 'schedule_day', 'schedule_time'],
        name='unique_room_schedule'
    )
]

# Application-Level Validation
def clean(self):
    # ูููุน ุฅูุดุงุก ูุฌููุนุชูู ูู:
    # - ููุณ ุงููุงุนุฉ
    # - ููุณ ุงูููู
    # - ููุณ ุงูููุช
```

#### ๐ ุงููููุงุช ุงูููุนุฏููุฉ:
```
apps/teachers/models.py          โ ุฅุถุงูุฉ Room model + validation
apps/teachers/admin.py           โ ุฅุถุงูุฉ RoomAdmin + ุชุญุฏูุซ GroupAdmin
```

#### โจ ุงูููุฒุงุช:
- โ ููุน ุงูุชุถุงุฑุจ ูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (DB-Level)
- โ ููุน ุงูุชุถุงุฑุจ ูู ูุณุชูู ุงูุชุทุจูู (App-Level)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ุชุนุงุฑุถ

---

### 3๏ธโฃ ุฎูุงุฑุฒููุฉ ุชุณุฌูู ุงูุญุถูุฑ (4 ุฎุทูุงุช ุตุงุฑูุฉ)

#### โ ุงูุฎูุงุฑุฒููุฉ ุงูุฌุฏูุฏุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุฎุทูุฉ 1: ุงูุชุนุฑูู                              โ
โ  โโโโโโโโโโโโโโโ                                โ
โ  โข ุฌูุจ ุงูุทุงูุจ ุจุงุณุชุฎุฏุงู student_code            โ
โ  โข ุฅุฐุง ุบูุฑ ููุฌูุฏ โ ุฑูุถ ููุฑุงู                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โฌ๏ธ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุฎุทูุฉ 2: ูุทุงุจูุฉ ุงูุฌุฏูู                       โ
โ  โโโโโโโโโโโโโโโโโโโโ                           โ
โ  โข ุงูุจุญุซ ูู enrollments ุนู ุงููุฌููุนุฉ            โ
โ  โข ุดุฑุท: schedule_day = ุงูููู ุงูุญุงูู            โ
โ  โข ุฅุฐุง ูุง ููุฌุฏ โ "ูุง ุชูุฌุฏ ุญุตุฉ ูุฌุฏููุฉ ูู ุงูููู" โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โฌ๏ธ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุฎุทูุฉ 3: ูุงุนุฏุฉ ุงูู 10 ุฏูุงุฆู ุงูุตุงุฑูุฉ          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ               โ
โ  โข ููุงุฑูุฉ: ุงูููุช ุงูุญุงูู vs ุงูุฌุฏูู ุงูุฑุณูู      โ
โ  โข ูุจู ุงูููุนุฏ ุจู 30 ุฏูููุฉ: ุฑูุถ (ูุจูุฑ ุฌุฏุงู)    โ
โ  โข โค 10 ุฏูุงุฆู ุจุนุฏ ุงูููุนุฏ: โ ูุจูู              โ
โ  โข > 10 ุฏูุงุฆู ุจุนุฏ ุงูููุนุฏ: โ ุฑูุถ ูุงูู          โ
โ                                                 โ
โ  โ๏ธ ูุง ููุฌุฏ "ุชุฃุฎูุฑ" โ ููุท ูุจูู ุฃู ุฑูุถ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โฌ๏ธ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุฎุทูุฉ 4: ุงููุญุต ุงููุงูู                        โ
โ  โโโโโโโโโโโโโโโโโโ                             โ
โ  โข ุงูุดูุฑ ุงูุฃูู: 0 ุญุตุต ุณูุงุญ (ุฏูุน ููุฑุงู)         โ
โ  โข ุงูุดููุฑ ุงูุชุงููุฉ: 2 ุญุตุฉ ุณูุงุญ                  โ
โ  โข ุงูุทูุงุจ ุงููุนูููู: ุฏุงุฆูุงู ูุณููุญ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โฌ๏ธ
              โ ุชุณุฌูู ุงูุญุถูุฑ
```

#### ๐ ุงููููุงุช ุงูููุนุฏููุฉ:
```
apps/attendance/services.py      โ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงููุฉ ููู AttendanceService
apps/attendance/views.py         โ ุฅุถุงูุฉ process_student_code endpoint
apps/attendance/urls.py          โ ุฅุถุงูุฉ api/process-code/ route
```

#### ๐ ุงูุซูุงุจุช ุงูุฑุฆูุณูุฉ:
```python
STRICT_GRACE_PERIOD_MINUTES = 10     # ูุงุนุฏุฉ ุงูู 10 ุฏูุงุฆู
EARLY_ARRIVAL_LIMIT_MINUTES = 30    # ุงูุณูุงุญ ุจุงููุตูู ุงููุจูุฑ
```

---

### 4๏ธโฃ ุงููุธุงู ุงูุซุงุจุช (Fixed Schedule Philosophy)

#### โ ูุง ุชู ุฅุฒุงูุชู:
- โ ุญุฐู `grace_period` ูู Group model
- โ ุฅูุบุงุก ุฃู logic ูุนุชูุฏ ุนูู "ููุช ูุตูู ุงููุฏุฑุณ"
- โ ุฅูุบุงุก ุฃู logic ูุนุชูุฏ ุนูู "ุจุฏุก ุงูุญุตุฉ ุงููุนููุฉ"

#### โ ุงูููุณูุฉ ุงูุฌุฏูุฏุฉ:
```
ุงูุฌุฏูู ุงูุฑุณูู = ุงูุญููู ุงูููุงุฆู

ุงูุญุตุฉ 9:00 ุตุจุงุญุงู:
โโ ุงูุจุงุจ ููุชูุญ: 8:30 - 9:10
โโ ุงูุจุงุจ ูุบูู: 9:11 ููุง ููู (BLOCKED)

ูุง ุงุณุชุซูุงุกุงุช. ูุง ูุฑููุฉ. ุงูุถุจุงุท ูุงูู.
```

#### ๐ ุงููููุงุช ุงูููุนุฏููุฉ:
```
apps/teachers/models.py          โ ุญุฐู grace_period field
apps/teachers/admin.py           โ ุชุญุฏูุซ fieldsets + ุฅุถุงูุฉ description
```

---

## ๐ฆ ุงูุชุญุฏูุซุงุช ุงูุฅุถุงููุฉ

### A. Admin Panels
ุชู ุชุญุฏูุซ ุฌููุน ุงูู Admin interfaces:
- Room Admin (ุฌุฏูุฏ)
- Student Admin (student_code ุจุฏู barcode)
- Group Admin (ุฅุถุงูุฉ room + ุญุฐู grace_period)
- Attendance Admin (ุชุญุฏูุซ search ุจู student_code)

### B. Forms
```python
# apps/students/forms.py
StudentForm                      โ ููุทุงูุจ ููุท (student_code)
StudentGroupEnrollmentForm       โ ููุชุณุฌูู ูู ุงููุฌููุนุฉ (financial_status)
```

### C. Dependencies
ุชู ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ:
```bash
pip install celery django-celery-beat
pip install django-redis redis
```

### D. Bug Fixes
- ุฅุตูุงุญ Celery import errors
- ุฅุตูุงุญ Admin registration conflicts
- ุชุญุฏูุซ notification views (WhatsApp ุจุฏู SMS)

---

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### 1. ุชุณุฌูู ุงูุญุถูุฑ (ุงููุธุงู ุงูุฌุฏูุฏ)
```http
POST /attendance/api/process-code/
Content-Type: application/json

{
  "student_code": "1001"
}
```

**Response (ูุฌุงุญ):**
```json
{
  "success": true,
  "message": "ูุฑุญุจุงู ุฃุญูุฏ ูุญูุฏ - ูุฌููุนุฉ ุงูุฑูุงุถูุงุช",
  "sound": "success",
  "status": "present"
}
```

**Response (ุฑูุถ - ุชุฃุฎุฑ):**
```json
{
  "success": false,
  "message": "ููููุน ุงูุฏุฎูู - ุชุฃุฎุฑุช 15 ุฏูููุฉ (ุงูุญุฏ ุงููุณููุญ: 10 ุฏูุงุฆู)",
  "sound": "error"
}
```

---

## ๐ Database Migrations

ุชู ุฅูุดุงุก migrations ููุชุทุจููุงุช ุงูุซูุงุซุฉ ุงูุฑุฆูุณูุฉ:

```
apps/teachers/migrations/0001_initial.py:
  + Create model Room
  + Create model Teacher
  + Create model Group (ูุน room ู ุจุฏูู grace_period)

apps/students/migrations/0001_initial.py:
  + Create model Student (ูุน student_code)
  + Create model StudentGroupEnrollment
  + Add field groups to student

apps/attendance/migrations/0001_initial.py:
  + Create model Session
  + Create model Attendance
```

### โ๏ธ ุฎุทูุงุช ุงูุชุทุจูู:
```bash
# 1. ุงููุณุฎ ุงูุงุญุชูุงุทู
python manage.py dumpdata > backup.json

# 2. ุชุทุจูู Migrations
python manage.py migrate

# 3. ุฅูุดุงุก ุงููุงุนุงุช
python manage.py shell
>>> from apps.teachers.models import Room
>>> Room.objects.create(name="ูุงุนุฉ A", capacity=30)
>>> Room.objects.create(name="ูุงุนุฉ B", capacity=25)

# 4. ุชุญุฏูุซ ุงููุฌููุนุงุช ุงูููุฌูุฏุฉ (ุฑุจุทูุง ุจุงููุงุนุงุช)
```

---

## ๐ Checklist ุงูุชุทุจูู

### ูุจู ุงูุชุทุจูู:
- [ ] ูุณุฎ ุงุญุชูุงุทู ูุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุชุฃููุฏ ุชูุงูุฑ ุฌููุน ุงูู dependencies
- [ ] ุงุฎุชุจุงุฑ ุงูู migrations ุนูู ุจูุฆุฉ ุชุฌุฑูุจูุฉ

### ุฃุซูุงุก ุงูุชุทุจูู:
- [ ] ุชุดุบูู migrations
- [ ] ุฅูุดุงุก ุงููุงุนุงุช ูู ุงููุธุงู
- [ ] ุฑุจุท ุงููุฌููุนุงุช ุงูููุฌูุฏุฉ ุจุงููุงุนุงุช
- [ ] ุชุญุฏูุซ ุฃููุงุฏ ุงูุทูุงุจ (barcode โ student_code)
- [ ] ุงุฎุชุจุงุฑ endpoint ุงูุฌุฏูุฏ ููุญุถูุฑ

### ุจุนุฏ ุงูุชุทุจูู:
- [ ] ุงุฎุชุจุงุฑ ุณููุงุฑูู ูุงูู ููุญุถูุฑ
- [ ] ุงูุชุฃูุฏ ูู ุนูู conflict validation
- [ ] ุงูุชุฃูุฏ ูู ูุงุนุฏุฉ ุงูู 10 ุฏูุงุฆู
- [ ] ุชุฏุฑูุจ ุงููุดุฑููู ุนูู ุงููุงุฌูุฉ ุงูุฌุฏูุฏุฉ

---

## ๐ฏ ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ

### 1. ุงูุชูููุฉ
- โ ุฅูุบุงุก ุชูููุฉ ุดุฑุงุก ูุตูุงูุฉ ุฃุฌูุฒุฉ ุงูุจุงุฑููุฏ
- โ ูุง ุญุงุฌุฉ ูุทุจุงุนุฉ ูุงุฑูููุงุช ุจุจุงุฑููุฏ

### 2. ุงูุจุณุงุทุฉ
- โ ููุฏ ูุตูุฑ ุณูู ุงููุชุงุจุฉ (1001ุ 5050)
- โ ููุฌูู ูุจุณุท (4 ุฎุทูุงุช ููุท)
- โ ูุง ุชุนููุฏุงุช hardware

### 3. ุงูุงูุถุจุงุท
- โ ูุงุนุฏุฉ ุตุงุฑูุฉ (10 ุฏูุงุฆู)
- โ ูุง ุงุณุชุซูุงุกุงุช
- โ ุงูุฌุฏูู = ุงูุญูู ุงูููุงุฆู

### 4. ุชูุธูู ุงููุงุนุงุช
- โ ููุน ุงูุชุนุงุฑุถุงุช ุชููุงุฆูุงู
- โ ุงุณุชุบูุงู ุฃูุถู ูููุงุนุงุช
- โ ุชูุงุฑูุฑ ุฏูููุฉ

---

## โ๏ธ ููุงุท ูููุฉ

### 1. ูุงุนุฏุฉ ุงูู 10 ุฏูุงุฆู
```
โ๏ธ ูุฐู ุงููุงุนุฏุฉ ุตุงุฑูุฉ ุฌุฏุงู!

ุงูุทุงูุจ ุงูุฐู ูุชุฃุฎุฑ 11 ุฏูููุฉ = ุฑูุถ ูุงูู (ููุณ "ุชุฃุฎูุฑ"ุ ุจู BLOCKED)

ุชุฃูุฏ ูู:
- ุฅุฎุจุงุฑ ุงูุทูุงุจ ุจุงููุงุนุฏุฉ ูุณุจูุงู
- ูุฌูุฏ ุณุงุนุฉ ุฏูููุฉ ูู ุงูุณูุชุฑ
- ุชูุนูุฉ ุฃูููุงุก ุงูุฃููุฑ
```

### 2. ุงูุดูุฑ ุงูุฃูู
```
ุงูุดูุฑ ุงูุฃูู: 0 ุญุตุต ุณูุงุญ = ุฏูุน ููุฑุงู

ุงูุทุงูุจ ุงูุฌุฏูุฏ ูู ูุชููู ูู ุงูุฏุฎูู ุจุฏูู ุฏูุนุ ุญุชู ุงูุญุตุฉ ุงูุฃููู.
```

### 3. ุงูุชุนุงุฑุถุงุช
```
ุงููุธุงู ุณูุฑูุถ ุชููุงุฆูุงู ุฅูุดุงุก ูุฌููุนุชูู ูู:
- ููุณ ุงููุงุนุฉ + ููุณ ุงูููู + ููุณ ุงูููุช

ูุฌุจ ูุฑุงุฌุนุฉ ุงูุฌุฏุงูู ุงูุญุงููุฉ ูุจู ุงูุชุทุจูู.
```

---

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู ุฃู ุฃุณุฆูุฉ:
- ุฑุงุฌุน ูุฐุง ุงูููู ุฃููุงู
- ุชุญูู ูู ุงูู logs: `python manage.py check`
- ุงุฎุชุจุฑ ุงูู migrations ุนูู ุจูุฆุฉ ุชุฌุฑูุจูุฉ ุฃููุงู

---

## โ ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ูุธุงู Educore ุจูุฌุงุญ ููููู:
- โ ุฃุจุณุท (ุฅุฏุฎุงู ูุฏูู ุจุฏู hardware)
- โ ุฃุตุฑู (ูุงุนุฏุฉ 10 ุฏูุงุฆู ุจุฏูู ุงุณุชุซูุงุกุงุช)
- โ ุฃูุซุฑ ุชูุธููุงู (conflict-free scheduling)
- โ ุฃูู ุชูููุฉ (ูุง ุญุงุฌุฉ ูุฃุฌูุฒุฉ ุจุงุฑููุฏ)

**๐ Educore V2 - ูุธุงู ุญุถูุฑ ุงุญุชุฑุงููุ ุจุณูุทุ ูุตุงุฑู!**
