{% extends "base.html" %}

{% block title %}بطاقة QR - {{ student.full_name }}{% endblock %}

{% block extra_css %}
<style>
    .qr-card-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 80vh;
        padding: 2rem;
        background: #f5f5f5;
    }
    
    .qr-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        padding: 3rem;
        text-align: center;
        max-width: 400px;
        width: 100%;
    }
    
    .school-logo {
        font-size: 60px;
        margin-bottom: 1rem;
    }
    
    .school-name {
        font-size: 24px;
        font-weight: bold;
        color: #333;
        margin-bottom: 0.5rem;
    }
    
    .card-title {
        font-size: 16px;
        color: #666;
        margin-bottom: 2rem;
    }
    
    .qr-code-container {
        padding: 1.5rem;
        background: white;
        border: 2px solid #0066cc;
        border-radius: 15px;
        display: inline-block;
        margin-bottom: 2rem;
    }
    
    .qr-code {
        width: 250px;
        height: 250px;
        display: block;
    }
    
    .student-name {
        font-size: 28px;
        font-weight: bold;
        color: #333;
        margin-bottom: 1rem;
    }
    
    .student-code {
        font-size: 36px;
        font-weight: bold;
        color: #0066cc;
        font-family: 'Courier New', monospace;
        letter-spacing: 3px;
        margin-bottom: 2rem;
    }
    
    .actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .btn-print {
        background: #0066cc;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .btn-print:hover {
        background: #0052a3;
    }
    
    @media print {
        body * {
            visibility: hidden;
        }
        .qr-card, .qr-card * {
            visibility: visible;
        }
        .qr-card {
            position: absolute;
            left: 0;
            right: 0;
            margin: auto;
            box-shadow: none;
        }
        .actions {
            display: none;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="qr-card-container">
    <div class="qr-card">
        <img src="{% static 'images/logo.jpeg' %}" alt="مركز البداية" class="school-logo" style="width: 80px; height: 80px; border-radius: 10px;">
        <div class="school-name">مركز البداية</div>
        <div class="card-title">بطاقة حضور الطالب</div>
        
        <div class="qr-code-container">
            {% if student.qr_code_base64 %}
                <img src="{{ student.qr_code_base64 }}" class="qr-code" alt="QR Code">
            {% else %}
                <div style="width: 250px; height: 250px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; border-radius: 8px;">
                    <span style="color: #999;">QR غير متوفر</span>
                </div>
            {% endif %}
        </div>
        
        <div class="student-name">{{ student.full_name }}</div>
        <div class="student-code">{{ student.student_code }}</div>
        
        <div class="actions">
            <button class="btn-print" onclick="window.print()">
                <i class="bi bi-printer"></i>
                طباعة البطاقة
            </button>
            <a href="{% url 'students:detail' student.student_id %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-right"></i>
                العودة للتفاصيل
            </a>
        </div>
    </div>
</div>
{% endblock %}
