{% extends 'base.html' %}
{% load static %}

{% block title %}{% if student %}تعديل الطالب - {{ student.full_name }}{% else %}إضافة طالب جديد{% endif %}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card">
    <div class="card-header">
      <h4>
        {% if student %}✏️ تعديل الطالب - {{ student.full_name }}{% else %}➕ إضافة طالب جديد{% endif %}
      </h4>
    </div>
    <div class="card-body">
      <form method="post">
        {% csrf_token %}

        <div class="mb-3">
          <label for="student_code" class="form-label">كود الطالب</label>
          <input
            type="text"
            name="student_code"
            class="form-control"
            value="{{ student.student_code|default:'' }}"
            required
          />
        </div>

        <div class="mb-3">
          <label for="full_name" class="form-label">الاسم الكامل</label>
          <input
            type="text"
            name="full_name"
            class="form-control"
            value="{{ student.full_name|default:'' }}"
            required
          />
        </div>

        <div class="mb-3">
          <label for="parent_phone" class="form-label">رقم ولي الأمر</label>
          <input
            type="text"
            name="parent_phone"
            class="form-control"
            value="{{ student.parent_phone|default:'' }}"
            required
          />
        </div>

        <div class="mb-3">
          <label for="groups" class="form-label">المجموعات</label>
          <select name="groups" class="form-control" multiple>
            {% for group in groups %}
            <option value="{{ group.group_id }}">{{ group.group_name }} - {{ group.teacher.full_name }}</option>
            {% endfor %}
          </select>
          <small class="text-muted">يمكنك اختيار أكثر من مجموعة</small>
        </div>

        <div class="mb-3">
          <div class="form-check">
            <input
              type="checkbox"
              name="is_active"
              class="form-check-input"
              id="isActive"
              {% if student.is_active %}checked{% endif %}
            />
            <label for="isActive" class="form-check-label">نشط</label>
          </div>
        </div>

        <div class="text-center mt-4">
          <button type="submit" class="btn btn-primary">
            {% if student %}حفظ التغييرات{% else %}إضافة الطالب{% endif %}
          </button>
          <a href="{% url 'students:list' %}" class="btn btn-secondary">إلغاء</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
