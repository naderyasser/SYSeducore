{% extends 'base.html' %}
{% load static %}

{% block title %}ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ - {{ student.full_name }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-12">
      <a href="{% url 'students:list' %}" class="btn btn-secondary mb-3">
        â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
      </a>
    </div>

    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4>ğŸ‘¤ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨</h4>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <strong>Ø§Ù„ÙƒÙˆØ¯:</strong>
                <p>{{ student.student_code }}</p>
              </div>
              <div class="mb-3">
                <strong>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</strong>
                <p>{{ student.full_name }}</p>
              </div>
              <div class="mb-3">
                <strong>Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±:</strong>
                <p>{{ student.parent_phone }}</p>
              </div>
              <div class="mb-3">
                <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong>
                <p>
                  {% if student.is_active %}
                  <span class="badge bg-success">Ù†Ø´Ø·</span>
                  {% else %}
                  <span class="badge bg-secondary">ØºÙŠØ± Ù†Ø´Ø·</span>
                  {% endif %}
                </p>
              </div>
              <div class="mb-3">
                <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª:</strong>
                <ul>
                  {% for enrollment in student.studentgroupenrollment_set.all %}
                  <li>{{ enrollment.group.group_name }} - {{ enrollment.group.teacher.full_name }}</li>
                  {% empty %}
                  <li class="text-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</li>
                  {% endfor %}
                </ul>
              </div>
            </div>

            <div class="col-md-6">
              <h5>Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</h5>
              <div class="table-responsive">
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                      <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                      <th>Ø§Ù„ÙˆÙ‚Øª</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for attendance in recent_attendances %}
                    <tr>
                      <td>{{ attendance.session.session_date|date:"Y-m-d" }}</td>
                      <td>
                        <span class="status-{{ attendance.status }}">
                          {% if attendance.status == 'present' %}Ø­Ø§Ø¶Ø±
                          {% elif attendance.status == 'late' %}Ù…ØªØ£Ø®Ø±
                          {% elif attendance.status == 'absent' %}ØºØ§Ø¦Ø¨
                          {% endif %}
                        </span>
                      </td>
                      <td>{{ attendance.scan_time|time:"H:i" }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="3" class="text-center text-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ±</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
